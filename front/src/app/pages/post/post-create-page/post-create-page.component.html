<div class="max-w-4xl mx-auto p-5">
  <!-- Header with back arrow and title -->
  <div class="flex items-center mb-8">
    <button 
      class="flex items-center text-gray-600 hover:text-gray-800 mr-4"
      (click)="goBack()">
      <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
    <h1 class="text-2xl font-bold text-gray-800">Créer un nouvel article</h1>
  </div>

  <!-- Post creation form -->
  <div class="max-w-md mx-auto">
    <form [formGroup]="postForm" (ngSubmit)="onSubmit()">
      <!-- Topic selection -->
      <div class="mb-6">
        <select 
          formControlName="topicId"
          class="w-full p-3 border border-purple-300 rounded-lg text-base bg-white box-border focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-gray-600"
          [ngClass]="{ 'border-red-500': isSubmitted && f['topicId'].errors }">
          <option value="" disabled>Sélectionner un thème</option>
          <option *ngFor="let topic of topics" [value]="topic.id">{{ topic.name }}</option>
        </select>
        <div *ngIf="isSubmitted && f['topicId'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['topicId'].errors['required']">Veuillez sélectionner un thème</div>
        </div>
      </div>

      <!-- Title input -->
      <div class="mb-6">
        <input 
          type="text" 
          formControlName="title"
          placeholder="Titre de l'article"
          class="w-full p-3 border border-purple-300 rounded-lg text-base bg-white box-border focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200"
          [ngClass]="{ 'border-red-500': isSubmitted && f['title'].errors }">
        <div *ngIf="isSubmitted && f['title'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['title'].errors['required']">Le titre est requis</div>
          <div *ngIf="f['title'].errors['minlength']">Le titre doit contenir au moins 3 caractères</div>
          <div *ngIf="f['title'].errors['maxlength']">Le titre ne doit pas dépasser 100 caractères</div>
        </div>
      </div>

      <!-- Content textarea -->
      <div class="mb-6">
        <textarea 
          formControlName="content"
          placeholder="Contenu de l'article"
          rows="8"
          class="w-full p-3 border border-purple-300 rounded-lg text-base bg-white box-border resize-none focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200"
          [ngClass]="{ 'border-red-500': isSubmitted && f['content'].errors }"></textarea>
        <div *ngIf="isSubmitted && f['content'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['content'].errors['required']">Le contenu est requis</div>
          <div *ngIf="f['content'].errors['minlength']">Le contenu doit contenir au moins 10 caractères</div>
          <div *ngIf="f['content'].errors['maxlength']">Le contenu ne doit pas dépasser 5000 caractères</div>
        </div>
      </div>

      <!-- Error message -->
      <div *ngIf="errorMessage" class="p-3 rounded-lg mb-6 bg-red-100 text-red-800 border border-red-200">
        {{ errorMessage }}
      </div>

      <!-- Submit button -->
      <div class="text-center">
        <button 
          type="submit" 
          [disabled]="isLoading"
          class="bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium px-8 py-3 rounded-lg transition-colors duration-200">
          <span *ngIf="isLoading" class="inline-block w-4 h-4 border-2 border-current border-r-transparent rounded-full animate-spin mr-2" role="status" aria-hidden="true"></span>
          Créer
        </button>
      </div>
    </form>
  </div>
</div>
